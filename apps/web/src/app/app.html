<div
  class="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-black text-gray-100 font-mono p-3"
>
  <div
    class="bg-gray-800 bg-opacity-80 rounded-xl shadow-2xl p-8 w-full max-w-2xl border-2 border-purple-700"
  >
    <h1
      class="text-3xl font-bold text-purple-400 mb-4 py-3 flex items-center justify-center gap-2"
    >
      <span class="w-10 h-10">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <ellipse cx="16" cy="18" rx="12" ry="10" fill="#F97316" />
          <ellipse cx="16" cy="18" rx="8" ry="7" fill="#FDBA74" />
          <path
            d="M12 13c.5-2 2-5 4-5s3.5 3 4 5"
            stroke="#78350F"
            stroke-width="1.5"
            fill="none"
          />
          <ellipse cx="12" cy="19" rx="1.5" ry="2" fill="#78350F" />
          <ellipse cx="20" cy="19" rx="1.5" ry="2" fill="#78350F" />
          <path
            d="M14 23c1 1 3 1 4 0"
            stroke="#78350F"
            stroke-width="1.5"
            fill="none"
          />
        </svg>
      </span>
      <span> Ripper - The Github Griller </span>
    </h1>
    <p class="mb-6 text-white font-semibold text-center py-3">
      Enter your GitHub username and get roasted!
      <span class="italic">(Dark dev humor ahead...)</span>
    </p>
    <div class="flex flex-col gap-4 mb-6">
      <input
        type="text"
        placeholder="GitHub username..."
        class="px-4 py-2 rounded bg-gray-700 text-lg font-semibold text-white focus:outline-none focus:ring-2 focus:ring-purple-500 placeholder-white border border-gray-600"
        required
        autocomplete="off"
        ngModel
        #username="ngModel"
      />
      <button
        [disabled]="!username.valid || roastMutations.isPending()"
        (click)="roastMutations.mutate(username.value)"
        type="submit"
        class="bg-purple-700 hover:bg-purple-900 text-white cursor-pointer font-bold py-2 rounded transition-colors duration-200 shadow-md flex items-center justify-center gap-2"
      >
        @if (roastMutations.isPending()) {
        <span class="animate-spin">
          <!-- Spinning gear SVG -->
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24">
            <circle
              class="opacity-25"
              cx="12"
              cy="12"
              r="10"
              stroke="#a78bfa"
              stroke-width="4"
            />
            <path
              class="opacity-75"
              fill="#a78bfa"
              d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
            >
              <animateTransform
                attributeName="transform"
                type="rotate"
                from="0 12 12"
                to="360 12 12"
                dur="1s"
                repeatCount="indefinite"
              />
            </path>
          </svg>
        </span>
        <span>Roasting...</span>
        } @else {
        <span class="flex items-center gap-2">
          <!-- Fire SVG -->
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none">
            <path
              d="M12 2C12 2 7 8 7 13a5 5 0 0010 0c0-5-5-11-5-11z"
              fill="#f59e42"
            />
            <path
              d="M12 2C12 2 9 7 9 13a3 3 0 006 0c0-6-3-11-3-11z"
              fill="#fbbf24"
            />
          </svg>
          Roast Me
          <!-- Ghost SVG -->
          <svg class="w-8 h-8" viewBox="0 0 24 24" fill="none">
            <path
              d="M12 3c-4.418 0-8 3.582-8 8v7c0 1.104.896 2 2 2 .828 0 1.578-.5 1.895-1.267A2.001 2.001 0 0012 21a2.001 2.001 0 003.105-1.267A2.001 2.001 0 0018 20c1.104 0 2-.896 2-2v-7c0-4.418-3.582-8-8-8z"
              fill="#f3f4f6"
            />
            <circle cx="9" cy="13" r="1" fill="#18181b" />
            <circle cx="15" cy="13" r="1" fill="#18181b" />
          </svg>
        </span>
        }
      </button>
    </div>
    @let roastResult = roastMutations.data();

    <!-- hello -->
    @if (roastResult) {
    <app-roast-card
      [results]="roastResult"
      [isModalOpen]="isRoastCardOpen()"
      (modalClosed)="closeRoastCard()"
    />
    }
  </div>
  <footer
    class="mt-8 text-white font-semibold text-center flex flex-col items-center gap-2"
  >
    <div>
      Made with <span class="text-purple-400">&lt;/&gt;</span> and a dash of
      evil by Maina Wycliffe
    </div>
  </footer>

  <!-- Floating GitHub repo link -->
  <a
    href="https://github.com/mainawycliffe/github-griller"
    target="_blank"
    rel="noopener noreferrer"
    class="fixed bottom-5 right-5 z-50 bg-black bg-opacity-95 border-2 border-orange-400 rounded-full shadow-2xl p-5 flex items-center justify-center text-orange-300 hover:text-white hover:bg-orange-500 transition-colors duration-200 animate-pulse"
    title="View on GitHub"
    aria-label="View on GitHub"
    style="
      box-shadow:
        0 0 24px 4px #f59e42,
        0 2px 8px 0 #000;
    "
  >
    <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24">
      <path
        d="M12 2C6.477 2 2 6.484 2 12.021c0 4.428 2.865 8.184 6.839 9.504.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.342-3.369-1.342-.454-1.155-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.004.07 1.532 1.032 1.532 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.339-2.221-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.987 1.029-2.687-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.295 2.748-1.025 2.748-1.025.546 1.378.202 2.397.1 2.65.64.7 1.028 1.594 1.028 2.687 0 3.847-2.337 4.695-4.566 4.944.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.749 0 .267.18.577.688.48C19.138 20.2 22 16.447 22 12.021 22 6.484 17.523 2 12 2z"
      />
    </svg>
  </a>
</div>
