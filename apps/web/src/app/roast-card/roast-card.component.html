@let roastResult = results();

<!-- eslint-disable-next-line @angular-eslint/template/click-events-have-key-events, @angular-eslint/template/interactive-supports-focus -->
<div
  (click)="closeCard()"
  [class.hidden]="!isModalOpen()"
  class="fixed inset-0 z-50 flex items-start sm:items-center justify-center bg-black bg-opacity-80 overflow-y-auto pt-4 pb-4 px-2 sm:px-4"
>
  <!-- eslint-disable-next-line @angular-eslint/template/click-events-have-key-events, @angular-eslint/template/interactive-supports-focus -->
  <div
    #roastCard
    (click)="$event.stopPropagation()"
    class="relative p-2 sm:p-4 md:p-6 bg-black bg-opacity-80 w-full max-w-full box-border flex items-center justify-center"
  >
    <div
      class="relative bg-gradient-to-br from-gray-900 via-purple-900 to-black border-4 border-orange-500 rounded-2xl shadow-2xl p-4 sm:p-6 w-full max-w-full sm:max-w-2xl md:max-w-3xl text-center animate-fade-in box-border overflow-hidden"
      style="min-width: 0; word-wrap: break-word"
    >
      <button
        type="button"
        class="absolute top-3 right-3 bg-gray-900 hover:bg-orange-500 active:bg-orange-600 text-gray-200 hover:text-black rounded-full p-3 shadow-xl focus:outline-none focus:ring-2 focus:ring-orange-400 transition-all duration-150 border-2 border-gray-700 hover:border-orange-500"
        title="Close"
        aria-label="Close"
        (click)="closeCard()"
      >
        <svg
          class="w-6 h-6"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </button>
      <div
        class="absolute -top-4 left-1/2 -translate-x-1/2 bg-orange-500 text-black px-4 py-1 rounded-full font-bold shadow-lg text-sm flex items-center gap-2"
      >
        <span class="flex items-center gap-2">
          <!-- Pumpkin SVG -->
          <svg class="w-5 h-5" viewBox="0 0 32 32" fill="none">
            <ellipse cx="16" cy="18" rx="12" ry="10" fill="#F97316" />
            <ellipse cx="16" cy="18" rx="8" ry="7" fill="#FDBA74" />
            <path
              d="M12 13c.5-2 2-5 4-5s3.5 3 4 5"
              stroke="#78350F"
              stroke-width="1.5"
              fill="none"
            />
            <ellipse cx="12" cy="19" rx="1.5" ry="2" fill="#78350F" />
            <ellipse cx="20" cy="19" rx="1.5" ry="2" fill="#78350F" />
            <path
              d="M14 23c1 1 3 1 4 0"
              stroke="#78350F"
              stroke-width="1.5"
              fill="none"
            />
          </svg>
          Ripper - Github Griller
        </span>
      </div>
      <div
        class="text-lg sm:text-xl md:text-2xl text-orange-300 font-bold my-4 flex flex-col gap-2 overflow-hidden"
      >
        <span class="drop-shadow-lg break-words whitespace-pre-wrap">{{
          roastResult
        }}</span>
      </div>
      <div class="flex justify-center gap-4 mt-6">
        <button
          type="button"
          (click)="downloadRoastCard()"
          class="bg-orange-500 hover:bg-orange-600 text-black font-bold py-2 px-4 rounded shadow transition-colors duration-200 flex items-center gap-2"
          title="Download roast card"
        >
          <span class="flex items-center gap-1">
            <!-- Download SVG -->
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24">
              <path
                d="M12 4v12m0 0l-4-4m4 4l4-4"
                stroke="#18181b"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <rect x="6" y="18" width="12" height="2" rx="1" fill="#18181b" />
            </svg>
            Download
          </span>
        </button>
        <button
          type="button"
          (click)="shareRoastCard()"
          class="bg-purple-700 hover:bg-purple-900 text-white font-bold py-2 px-4 rounded shadow transition-colors duration-200 flex items-center gap-2"
          title="Share on social media"
        >
          <span class="flex items-center gap-1">
            <!-- Share SVG -->
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24">
              <path
                d="M15 8.5V6a3 3 0 10-6 0v2.5M12 16v-8.5"
                stroke="#fff"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <circle cx="6.5" cy="17.5" r="2.5" fill="#a78bfa" />
              <circle cx="17.5" cy="17.5" r="2.5" fill="#a78bfa" />
            </svg>
            Share
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
